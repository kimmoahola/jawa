(this.webpackJsonpjawa=this.webpackJsonpjawa||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(4),s=n.n(o),c=(n(12),n(13),n(2)),u=n.n(c),i=n(5),l=n(1),f=n(6);function m(e){var t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n+=1){var a=e.attributes.item(n);t["@attributes"][a.nodeName]=a.nodeValue}}}else 3===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes()&&1===e.childNodes.length&&3===e.childNodes[0].nodeType)t=e.childNodes[0].nodeValue;else if(e.hasChildNodes())for(var r=0;r<e.childNodes.length;r+=1){var o=e.childNodes.item(r),s=o.nodeName;if("undefined"===typeof t[s])t[s]=m(o);else{if("undefined"===typeof t[s].push){var c=t[s];t[s]=[],t[s].push(c)}t[s].push(m(o))}}return t}var d=18e5,p=function(e){for(var t=[8,16,19],n=[],a=0;a<e.length;a++){var r=e[a];-1!==t.indexOf(r.ts.getHours())&&n.push(r)}return n};function h(){var e=Object(a.useState)(void 0),t=Object(l.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)(0),c=Object(l.a)(s,2),f=c[0],h=c[1];return Object(a.useEffect)((function(){var e=setTimeout((function(){return h((function(e){return e+1}))}),d);return function(){return clearTimeout(e)}}),[f]),Object(a.useEffect)((function(){function e(){return(e=Object(i.a)(u.a.mark((function e(){var t,n,a,r,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="Tampere",(n=new Date(Date.now())).setTime(n.getTime()+1728e5),e.next=5,fetch("https://opendata.fmi.fi/wfs?request=getFeature&storedquery_id=fmi::forecast::harmonie::surface::point::simple&place=".concat(t,"&parameters=temperature&endtime=").concat(n.toISOString()));case 5:return a=e.sent,e.next=8,a.text();case 8:r=e.sent,s=(new DOMParser).parseFromString(r,"text/xml"),c=m(s),o(c["wfs:FeatureCollection"]&&c["wfs:FeatureCollection"]["wfs:member"]?{ts:new Date(c["wfs:FeatureCollection"]["@attributes"].timeStamp),place:t,forecast:p(c["wfs:FeatureCollection"]["wfs:member"].map((function(e){return{ts:new Date(e["BsWfs:BsWfsElement"]["BsWfs:Time"]),temp:Number(e["BsWfs:BsWfsElement"]["BsWfs:ParameterValue"])}})))}:{place:t});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[f]),r.a.createElement("div",null,n?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Forecast of"),r.a.createElement("h1",null,n.place),r.a.createElement("div",null,n.forecast.map((function(e,t){return r.a.createElement(w,{key:t,ts:e.ts,temp:e.temp})}))),r.a.createElement(v,{ts:n.ts})):"")}function v(e){var t=e.ts,n=Object(a.useState)(0),o=Object(l.a)(n,2),s=o[0],c=o[1];return Object(a.useEffect)((function(){var e=setTimeout((function(){return c((function(e){return e+1}))}),3e4);return function(){return clearTimeout(e)}}),[s]),r.a.createElement("p",null,"Last updated ",Object(f.a)(new Date,t)," ago.")}function w(e){var t=e.ts,n=e.temp;return r.a.createElement("div",null,t.toLocaleString("fi-FI"),": ",n)}var b=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(h,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},7:function(e,t,n){e.exports=n(15)}},[[7,1,2]]]);
//# sourceMappingURL=main.83067db4.chunk.js.map